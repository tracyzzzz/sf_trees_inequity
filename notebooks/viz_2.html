<!DOCTYPE html>
<html>
<head>
  <style>
    .error {
        color: red;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.17.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "layer": [{"mark": {"type": "square", "size": 40}, "encoding": {"color": {"field": "neighborhood", "legend": null, "type": "nominal"}, "size": {"field": "population", "title": "Population", "type": "quantitative"}, "tooltip": [{"field": "neighborhood", "title": "Neighborhood", "type": "nominal"}, {"field": "population", "title": "Population", "type": "quantitative"}, {"field": "income_tag", "title": "Median Income", "type": "nominal"}], "x": {"field": "weighted_median_income", "title": "Median Household Income", "type": "quantitative"}, "y": {"field": "trees_per_acre", "title": "Number of Street Trees Per Acre", "type": "quantitative"}}, "selection": {"selector033": {"type": "interval", "bind": "scales", "encodings": ["x", "y"]}}}, {"mark": "line", "encoding": {"x": {"field": "weighted_median_income", "title": "Median Household Income", "type": "quantitative"}, "y": {"field": "trees_per_acre", "title": "Number of Street Trees Per Acre", "type": "quantitative"}}, "transform": [{"on": "weighted_median_income", "regression": "trees_per_acre"}]}], "data": {"name": "data-1f1d0489a2ca3efad06dbab4c7e7b98f"}, "height": 350, "title": "Median Household Income vs. Street Tree Density, by Neighborhood", "width": 500, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json", "datasets": {"data-1f1d0489a2ca3efad06dbab4c7e7b98f": [{"neighborhood": "Bayview Hunters Point", "tree_counts": 11542, "population": 65972.0, "area": 7024.12820288, "median_income": 79091.0, "trees_per_acre": 1.643193242866439, "weighted_median_income": 78776, "income_tag": "$78.8K"}, {"neighborhood": "Bernal Heights", "tree_counts": 8301, "population": 90759.0, "area": 2278.91856448, "median_income": 148891.5, "trees_per_acre": 3.642517169934113, "weighted_median_income": 150889, "income_tag": "$150.9K"}, {"neighborhood": "Castro/Upper Market", "tree_counts": 5619, "population": 36107.0, "area": 897.23778752, "median_income": 205420.0, "trees_per_acre": 6.262553893913823, "weighted_median_income": 198738, "income_tag": "$198.7K"}, {"neighborhood": "Chinatown", "tree_counts": 624, "population": 14310.0, "area": 143.78809152, "median_income": 30519.0, "trees_per_acre": 4.339719606843837, "weighted_median_income": 32917, "income_tag": "$32.9K"}, {"neighborhood": "Excelsior", "tree_counts": 4407, "population": 56322.0, "area": 1325.44282112, "median_income": 104406.0, "trees_per_acre": 3.3249265300453192, "weighted_median_income": 104109, "income_tag": "$104.1K"}, {"neighborhood": "Financial District/South Beach", "tree_counts": 6851, "population": 42616.0, "area": 1881.0550892800002, "median_income": 106165.0, "trees_per_acre": 3.642104922414747, "weighted_median_income": 146863, "income_tag": "$146.9K"}, {"neighborhood": "Glen Park", "tree_counts": 2467, "population": 8654.0, "area": 430.29529664, "median_income": 169102.5, "trees_per_acre": 5.733272055873709, "weighted_median_income": 168142, "income_tag": "$168.1K"}, {"neighborhood": "Golden Gate Park", "tree_counts": 142, "population": 128.0, "area": 4287.28155136, "median_income": 149688.0, "trees_per_acre": 0.0331212210578881, "weighted_median_income": 149688, "income_tag": "$149.7K"}, {"neighborhood": "Haight Ashbury", "tree_counts": 5307, "population": 59492.0, "area": 1171.03291072, "median_income": 182663.0, "trees_per_acre": 4.53189654314415, "weighted_median_income": 193041, "income_tag": "$193.0K"}, {"neighborhood": "Hayes Valley", "tree_counts": 6995, "population": 110976.0, "area": 1711.3795059200002, "median_income": 88210.0, "trees_per_acre": 4.087345895987951, "weighted_median_income": 123800, "income_tag": "$123.8K"}, {"neighborhood": "Inner Richmond", "tree_counts": 3560, "population": 32824.0, "area": 738.61374464, "median_income": 164583.0, "trees_per_acre": 4.8198399039204745, "weighted_median_income": 155154, "income_tag": "$155.2K"}, {"neighborhood": "Inner Sunset", "tree_counts": 5426, "population": 85054.0, "area": 2535.09211072, "median_income": 135791.0, "trees_per_acre": 2.1403561539461946, "weighted_median_income": 148474, "income_tag": "$148.5K"}, {"neighborhood": "Japantown", "tree_counts": 1370, "population": 14496.0, "area": 308.53367552000003, "median_income": 90938.0, "trees_per_acre": 4.440358083087733, "weighted_median_income": 90938, "income_tag": "$90.9K"}, {"neighborhood": "Lakeshore", "tree_counts": 536, "population": 32515.0, "area": 5500.24822784, "median_income": 69741.5, "trees_per_acre": 0.09745014730189591, "weighted_median_income": 68669, "income_tag": "$68.7K"}, {"neighborhood": "Lincoln Park", "tree_counts": 4, "population": 185.0, "area": 246.67852928, "median_income": 0.0, "trees_per_acre": 0.01621543638870847, "weighted_median_income": 0, "income_tag": "$0.0K"}, {"neighborhood": "Lone Mountain/USF", "tree_counts": 5448, "population": 137248.0, "area": 2582.1374924799998, "median_income": 161974.0, "trees_per_acre": 2.1098799021610186, "weighted_median_income": 151936, "income_tag": "$151.9K"}, {"neighborhood": "Marina", "tree_counts": 3846, "population": 25186.0, "area": 650.56000128, "median_income": 192742.0, "trees_per_acre": 5.911829796533537, "weighted_median_income": 196624, "income_tag": "$196.6K"}, {"neighborhood": "McLaren Park", "tree_counts": 120, "population": 612.0, "area": 1454.49726208, "median_income": 11316.0, "trees_per_acre": 0.08250273350696744, "weighted_median_income": 11316, "income_tag": "$11.3K"}, {"neighborhood": "Mission", "tree_counts": 16712, "population": 194006.0, "area": 5035.11553344, "median_income": 135450.0, "trees_per_acre": 3.319089679076804, "weighted_median_income": 134011, "income_tag": "$134.0K"}, {"neighborhood": "Mission Bay", "tree_counts": 2769, "population": 16939.0, "area": 947.2071712, "median_income": 0.0, "trees_per_acre": 2.9233309081602528, "weighted_median_income": 124037, "income_tag": "$124.0K"}, {"neighborhood": "Nob Hill", "tree_counts": 2285, "population": 39258.0, "area": 399.95224832, "median_income": 100707.0, "trees_per_acre": 5.713182035100805, "weighted_median_income": 97274, "income_tag": "$97.3K"}, {"neighborhood": "Noe Valley", "tree_counts": 6427, "population": 38603.0, "area": 971.76177728, "median_income": 210313.0, "trees_per_acre": 6.613760851954302, "weighted_median_income": 217209, "income_tag": "$217.2K"}, {"neighborhood": "North Beach", "tree_counts": 2291, "population": 11934.0, "area": 321.10268608, "median_income": 78661.0, "trees_per_acre": 7.134789272454784, "weighted_median_income": 88354, "income_tag": "$88.4K"}, {"neighborhood": "Oceanview/Merced/Ingleside", "tree_counts": 4401, "population": 77522.0, "area": 1898.01244288, "median_income": 94740.0, "trees_per_acre": 2.3187413847097993, "weighted_median_income": 100953, "income_tag": "$101.0K"}, {"neighborhood": "Outer Mission", "tree_counts": 3463, "population": 39331.0, "area": 1043.65285568, "median_income": 146653.5, "trees_per_acre": 3.318153139861488, "weighted_median_income": 140580, "income_tag": "$140.6K"}, {"neighborhood": "Outer Richmond", "tree_counts": 5829, "population": 45745.0, "area": 1155.67902464, "median_income": 106705.0, "trees_per_acre": 5.043788003174812, "weighted_median_income": 118791, "income_tag": "$118.8K"}, {"neighborhood": "Pacific Heights", "tree_counts": 5996, "population": 43057.0, "area": 889.23726272, "median_income": 160315.0, "trees_per_acre": 6.742857335577041, "weighted_median_income": 157107, "income_tag": "$157.1K"}, {"neighborhood": "Portola", "tree_counts": 3546, "population": 60979.0, "area": 2071.05335232, "median_income": 128676.0, "trees_per_acre": 1.7121722122840342, "weighted_median_income": 118501, "income_tag": "$118.5K"}, {"neighborhood": "Potrero Hill", "tree_counts": 9491, "population": 69797.0, "area": 3386.8956377599998, "median_income": 227782.0, "trees_per_acre": 2.802271169559003, "weighted_median_income": 228137, "income_tag": "$228.1K"}, {"neighborhood": "Presidio", "tree_counts": 164, "population": 16292.0, "area": 6031.35654656, "median_income": 218898.0, "trees_per_acre": 0.027191229491073252, "weighted_median_income": 218898, "income_tag": "$218.9K"}, {"neighborhood": "Presidio Heights", "tree_counts": 6790, "population": 58040.0, "area": 1770.48042304, "median_income": 121250.0, "trees_per_acre": 3.8351172436808105, "weighted_median_income": 149905, "income_tag": "$149.9K"}, {"neighborhood": "Russian Hill", "tree_counts": 3848, "population": 53712.0, "area": 972.44551552, "median_income": 128661.0, "trees_per_acre": 3.9570340328448554, "weighted_median_income": 142293, "income_tag": "$142.3K"}, {"neighborhood": "Seacliff", "tree_counts": 1078, "population": 2416.0, "area": 139.98267008, "median_income": 235588.0, "trees_per_acre": 7.700953263599871, "weighted_median_income": 235588, "income_tag": "$235.6K"}, {"neighborhood": "South of Market", "tree_counts": 3905, "population": 53124.0, "area": 1106.31183616, "median_income": 52668.0, "trees_per_acre": 3.529746200270464, "weighted_median_income": 67089, "income_tag": "$67.1K"}, {"neighborhood": "Sunset/Parkside", "tree_counts": 10485, "population": 103365.0, "area": 3303.8435552, "median_income": 130431.0, "trees_per_acre": 3.1735764193487315, "weighted_median_income": 134788, "income_tag": "$134.8K"}, {"neighborhood": "Tenderloin", "tree_counts": 3524, "population": 121149.0, "area": 1354.84563264, "median_income": 43750.0, "trees_per_acre": 2.6010343282675454, "weighted_median_income": 56915, "income_tag": "$56.9K"}, {"neighborhood": "Twin Peaks", "tree_counts": 410, "population": 8068.0, "area": 414.7140736, "median_income": 150337.0, "trees_per_acre": 0.988632954847472, "weighted_median_income": 148970, "income_tag": "$149.0K"}, {"neighborhood": "Visitacion Valley", "tree_counts": 1433, "population": 47982.0, "area": 963.25764672, "median_income": 74792.0, "trees_per_acre": 1.4876601342117814, "weighted_median_income": 81921, "income_tag": "$81.9K"}, {"neighborhood": "West of Twin Peaks", "tree_counts": 16994, "population": 113860.0, "area": 5455.77001984, "median_income": 166757.0, "trees_per_acre": 3.1148673676128267, "weighted_median_income": 161430, "income_tag": "$161.4K"}, {"neighborhood": "Western Addition", "tree_counts": 5641, "population": 72789.0, "area": 1272.71920256, "median_income": 115635.0, "trees_per_acre": 4.432242389879448, "weighted_median_income": 104352, "income_tag": "$104.4K"}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>